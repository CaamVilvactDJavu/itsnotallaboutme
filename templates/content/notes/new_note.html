<form id="new-note-form">
  <input
    type="text"
    id="note-title"
    name="title"
    placeholder="Note Title"
    required
  />
  <textarea
    id="note-content"
    name="content"
    cols="80"
    rows="40"
    style="
      background: #000000;
      color: #c6b085;
      border: 2px dotted #000000;
      font-size: 12pt;
    "
    placeholder="Write your note here in Markdown format..."
    required
  ></textarea>
  <button type="submit">Save Note</button>
</form>

<script>
  document
    .getElementById("new-note-form")
    .addEventListener("submit", async (e) => {
      e.preventDefault();
      const title = document.getElementById("note-title").value;
      const content = document.getElementById("note-content").value;

      const response = await fetch("/api/notes", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          id: Date.now().toString(),
          title,
          content: `# ${title}\n\n${content}`,
        }),
      });

      if (response.ok) {
        alert("Note saved successfully!");
        window.location.href = "/?page=notes";
      } else {
        alert("Failed to save note. Please try again.");
      }
    });
</script>
